{% extends 'students/base.html' %}

{% load widget_tweaks %}

{% load static %}

{% block content %}
  <div class="flex flex-col min-h-screen">
    {% include 'students/partials/student-header.html' %}
    <main class="flex-grow container mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8">
        <h2 class="text-3xl font-bold text-background-dark dark:text-background-light">
          All Quizzes
        </h2>
      </div>
      <!-- <div class="flex flex-wrap gap-4 mb-8">
        <button
          class="flex items-center gap-2 px-4 py-2 rounded-lg bg-background-light dark:bg-background-dark border border-background-dark/10 dark:border-background-light/10 text-background-dark/80 dark:text-background-light/80 hover:bg-primary/10 dark:hover:bg-primary/20 text-sm font-medium transition-colors">
          <span>Date</span>
          <span class="material-symbols-outlined text-lg">expand_more</span>
        </button>
        <button
          class="flex items-center gap-2 px-4 py-2 rounded-lg bg-background-light dark:bg-background-dark border border-background-dark/10 dark:border-background-light/10 text-background-dark/80 dark:text-background-light/80 hover:bg-primary/10 dark:hover:bg-primary/20 text-sm font-medium transition-colors">
          <span>Subject</span>
          <span class="material-symbols-outlined text-lg">expand_more</span>
        </button>
        <button
          class="flex items-center gap-2 px-4 py-2 rounded-lg bg-background-light dark:bg-background-dark border border-background-dark/10 dark:border-background-light/10 text-background-dark/80 dark:text-background-light/80 hover:bg-primary/10 dark:hover:bg-primary/20 text-sm font-medium transition-colors">
          <span>Status</span>
          <span class="material-symbols-outlined text-lg">expand_more</span>
        </button>
      </div> -->
      <div
        class="bg-background-light dark:bg-background-dark/80 rounded-xl overflow-hidden border border-background-dark/10 dark:border-background-light/10">
        <div class="overflow-x-auto">
        {% if all_quizzes %}
          <table class="w-full text-sm text-left text-background-dark/80 dark:text-background-light/80">
            <thead
              class="text-xs uppercase bg-background-light dark:bg-background-dark border-b border-background-dark/10 dark:border-background-light/10">
              <tr>
                <th class="px-6 py-3 font-medium" scope="col">Date</th>
                <th class="px-6 py-3 font-medium" scope="col">Time</th>
                <th class="px-6 py-3 font-medium" scope="col">Quiz Title</th>
                <th class="px-6 py-3 font-medium" scope="col">Subject</th>
                <th class="px-6 py-3 font-medium" scope="col">Time allowed</th>
                <th class="px-6 py-3 font-medium text-center" scope="col">
                  Status
                </th>
                <th class="px-6 py-3 font-medium text-right" scope="col">
                  Actions
                </th>
              </tr>
            </thead>
            
            <tbody>
              {% for quiz in all_quizzes %}
              <tr
                class="border-b border-background-dark/10 dark:border-background-light/10 hover:bg-primary/5 dark:hover:bg-primary/10">
                <td class="px-6 py-4 text-gray-600 font-medium text-background-dark dark:text-background-light whitespace-nowrap">
                  {{ quiz.due_date|date:"F j, Y" }}
                </td>
                <td class="px-6 py-4 text-gray-600 font-medium text-background-dark dark:text-background-light whitespace-nowrap">
                  {{ quiz.due_date|date:"g:i a" }}
                </td>
                <td class="px-6 py-4">{{ quiz.title }}</td>
                <td class="px-6 py-4">{{ quiz.subject.name }}</td>
                <td class="px-6 py-4">{{ quiz.duration }} mins</td>
                <td class="px-6 py-4 text-center">
                {% if quiz.due_date < current_time %}
                  <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-200 text-red-500">Expired</span>
                {% elif quiz.due_date|timeuntil:current_time %}
                  <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-200 text-green-500">Due in {{ quiz.due_date|timeuntil:current_time }}</span>
                {% endif %}
                </td>
                <td class="px-6 py-4 text-right">
                  <a class="font-medium text-primary hover:underline" href="{% url 'quiz:quiz-details' quiz.id %}">View</a>
                </td>
              </tr>
              {% endfor %}
            </tbody>
            {% endif %}
          </table>
        </div>
      </div>
        {% if message %}
        <span class="text-sm text-center text-red-600 mt-8 ">{{ message }}</span>
          {% endif %}
    </main>
  </div>
{% endblock %}